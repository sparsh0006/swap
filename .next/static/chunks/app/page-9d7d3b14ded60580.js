(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6601:function(){},8394:function(e,t,a){Promise.resolve().then(a.bind(a,6889))},6889:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(3827),n=a(2016),s=a(4090),o=a(5069),l=a(9711);let i=e=>{let{txId:t,status:a,error:n}=e;if("idle"===a)return null;if("loading"===a)return(0,r.jsx)("div",{className:"mt-4 p-4 bg-blue-100 rounded-md",children:(0,r.jsx)("p",{className:"text-blue-800 font-medium",children:"Transaction in progress..."})});if("error"===a)return(0,r.jsxs)("div",{className:"mt-4 p-4 bg-red-100 rounded-md",children:[(0,r.jsx)("p",{className:"text-red-800 font-medium",children:"Transaction failed"}),n&&(0,r.jsx)("p",{className:"text-red-700 text-sm mt-1",children:n})]});if("success"===a&&t){let e="https://solscan.io/tx/".concat(t);return(0,r.jsxs)("div",{className:"mt-4 p-4 bg-green-100 rounded-md",children:[(0,r.jsx)("p",{className:"text-green-800 font-medium tx-success",children:"Transaction successful!"}),(0,r.jsxs)("p",{className:"mt-2",children:["Transaction ID: ",(0,r.jsx)("span",{className:"font-mono text-sm break-all",children:t})]}),(0,r.jsx)("p",{className:"mt-2",children:(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"tx-link",children:"View on SolScan"})})]})}return null};var c=a(5265),d=a(3663).Buffer;async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"SonicxvLud67EceaEzCLRnMTBqzYUUYNr93DBkBdDES";try{let r=new URL("https://quote-api.jup.ag/v6/quote");r.searchParams.append("inputMint",t),r.searchParams.append("outputMint",a),r.searchParams.append("amount",e.toString()),r.searchParams.append("slippageBps","100");let n=await fetch(r.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok){let e=await n.text();throw Error("API request failed with status ".concat(n.status,": ").concat(e))}return await n.json()}catch(e){throw console.error("Error getting quote:",e),Error("Failed to get quote: ".concat(e instanceof Error?e.message:String(e)))}}async function u(e,t){try{let a=await fetch("https://quote-api.jup.ag/v6/swap",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({quoteResponse:e,userPublicKey:t,wrapAndUnwrapSol:!0,dynamicComputeUnitLimit:!0})});if(!a.ok){let e=await a.text();throw Error("API request failed with status ".concat(a.status,": ").concat(e))}return await a.json()}catch(e){throw console.error("Error getting swap transaction:",e),Error("Failed to get swap transaction: ".concat(e instanceof Error?e.message:String(e)))}}async function p(e,t,a){try{let t=new c.ew("https://rpc.helius.xyz/?api-key=db5f1cff-000b-4138-8211-92f09b51f0cc",{commitment:"confirmed",confirmTransactionInitialTimeout:6e4,disableRetryOnRateLimit:!1}),r=d.from(e,"base64"),n=c.GS.deserialize(r),s=await a(n),o=await t.sendTransaction(s,{skipPreflight:!1,preflightCommitment:"confirmed",maxRetries:3});console.log("Transaction sent with ID:",o);let l=await t.getLatestBlockhash("confirmed");console.log("Confirming transaction...");let i=await t.confirmTransaction({signature:o,blockhash:l.blockhash,lastValidBlockHeight:l.lastValidBlockHeight},"confirmed");if(i.value.err)throw Error("Transaction confirmed but failed: ".concat(JSON.stringify(i.value.err)));return o}catch(e){throw console.error("Error executing swap:",e),Error("Swap failed: ".concat(e instanceof Error?e.message:String(e)))}}let h=()=>{let{connection:e}=(0,o.R)(),{publicKey:t,signTransaction:a}=(0,l.O)(),[n,c]=(0,s.useState)(""),[d,h]=(0,s.useState)("idle"),[x,f]=(0,s.useState)(null),[g,w]=(0,s.useState)(""),b=async()=>{if(!n||0>=parseFloat(n)){w("Please enter a valid amount"),h("error");return}if(!t||!a){w("Please connect your wallet first"),h("error");return}try{h("loading"),w("");let r=Math.floor(1e6*parseFloat(n)),s=await m(r),o=await u(s,t.toString());if(!o.swapTransaction)throw Error("No swap transaction returned from API");let l=await p(o.swapTransaction,e,a);f(l),h("success")}catch(e){console.error("Swap error:",e),h("error"),w(e instanceof Error?e.message:"An unknown error occurred")}},j=!!t,N=j&&n&&parseFloat(n)>0?"â‰ˆ ".concat(4*parseFloat(n)," SONIC"):null;return(0,r.jsxs)("div",{className:"w-full max-w-md mx-auto p-6 bg-white rounded-lg shadow-lg dark:bg-gray-800",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Swap USDC to SONIC"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium mb-2",children:"Amount (USDC)"}),(0,r.jsx)("input",{id:"amount",type:"text",className:"amount-input dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Enter amount (e.g., 2)",value:n,onChange:e=>{let t=e.target.value.replace(/[^0-9.]/g,"");if(t.split(".").length>2)return;let a=t.split(".");a.length>1&&a[1].length>6||c(t)},disabled:!j||"loading"===d}),N&&(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:N})]}),(0,r.jsx)("button",{className:"swap-button w-full",onClick:b,disabled:!j||!n||0>=parseFloat(n)||"loading"===d,children:"loading"===d?"Processing...":"Swap USDC to SONIC"}),(0,r.jsx)(i,{txId:x,status:d,error:g}),!j&&(0,r.jsx)("p",{className:"text-sm text-center mt-4 text-gray-600 dark:text-gray-400",children:"Please connect your wallet to swap tokens"})]})};function x(){return(0,r.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-between p-8",children:[(0,r.jsxs)("div",{className:"z-10 w-full max-w-5xl flex flex-col items-center justify-between lg:flex-row",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-8 lg:mb-0",children:"Sonic Token Swap"}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(n.WalletButton,{})})]}),(0,r.jsx)("div",{className:"w-full max-w-md mt-12",children:(0,r.jsx)(h,{})}),(0,r.jsxs)("div",{className:"mb-32 grid text-center lg:max-w-5xl lg:w-full lg:mb-0 lg:grid-cols-3 lg:text-left",children:[(0,r.jsxs)("div",{className:"group rounded-lg border border-transparent px-5 py-4",children:[(0,r.jsx)("h2",{className:"mb-3 text-2xl font-semibold",children:"Connect Wallet"}),(0,r.jsx)("p",{className:"m-0 max-w-[30ch] text-sm opacity-80",children:"Connect your Solana wallet to get started with swapping tokens."})]}),(0,r.jsxs)("div",{className:"group rounded-lg border border-transparent px-5 py-4",children:[(0,r.jsx)("h2",{className:"mb-3 text-2xl font-semibold",children:"Enter Amount"}),(0,r.jsx)("p",{className:"m-0 max-w-[30ch] text-sm opacity-80",children:"Specify how much USDC you want to swap for SONIC tokens."})]}),(0,r.jsxs)("div",{className:"group rounded-lg border border-transparent px-5 py-4",children:[(0,r.jsx)("h2",{className:"mb-3 text-2xl font-semibold",children:"Swap Tokens"}),(0,r.jsx)("p",{className:"m-0 max-w-[30ch] text-sm opacity-80",children:"Click swap, sign the transaction, and see your tokens arrive in seconds."})]})]})]})}},2016:function(e,t,a){"use strict";a.r(t),a.d(t,{WalletButton:function(){return x},WalletProvider:function(){return f}});var r=a(3827),n=a(4090),s=a(9641),o=a(1651),l=a(2014),i=a(7754),c=a(3610),d=a(5166),m=a(762),u=a(5118),p=a(3238),h=a(5265);a(1800);let x=()=>(0,r.jsx)("div",{className:"wallet-button-container",children:(0,r.jsx)(u.a,{})}),f=e=>{let{children:t}=e;l.Q.Mainnet;let a=(0,n.useMemo)(()=>"https://rpc.helius.xyz/?api-key=db5f1cff-000b-4138-8211-92f09b51f0cc",[]);(0,n.useMemo)(()=>new h.ew(a,{commitment:"confirmed",confirmTransactionInitialTimeout:6e4,disableRetryOnRateLimit:!1}),[a]);let u=(0,n.useMemo)(()=>[new i.O,new c.e,new d.x,new m.A],[]);return(0,r.jsx)(s.U,{endpoint:a,config:{commitment:"confirmed"},children:(0,r.jsx)(o.n,{wallets:u,autoConnect:!0,children:(0,r.jsx)(p.s,{children:t})})})}}},function(e){e.O(0,[814,676,971,69,744],function(){return e(e.s=8394)}),_N_E=e.O()}]);